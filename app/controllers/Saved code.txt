post '/book_appointment' do
    # Retrieve the patient name from the request parameters
    patient_name = params[:name]
  
    # Find a doctor to assign the appointment
    doctor = Doctor.order('RANDOM()').first
  
    # Create a new patient
    patient = Patient.create(name: patient_name)
  
    # Create the new appointment
    new_appointment = Appointment.create(
      patient_name: patient_name,
      patient_id: patient.id,
      doctor_id: doctor.id,
      doctor_name: doctor.name,
      appointment_date: Faker::Date.between(from: Date.today, to: Date.today + 30),
      duration: Faker::Number.between(from: 15, to: 60)
    )
  
    new_appointment.to_json
  end

  get '/best_doctors' do
    best_doctors = Doctor.order(rating: :desc).limit(10)
    best_doctors.to_json
  end


  30.times do
  doctor = Doctor.order('RANDOM()').first
  patient = Patient.order('RANDOM()').first
  appointment_date = Faker::Date.between(from: Date.today, to: Date.today + 30)
  duration = Faker::Number.between(from: 15, to: 60)

  Appointment.create(
    patient_name: patient.name,
    doctor_name: doctor.name,
    doctor_id: doctor.id,
    patient_id: patient.id,
    appointment_date: appointment_date,
    duration: duration
  )
end